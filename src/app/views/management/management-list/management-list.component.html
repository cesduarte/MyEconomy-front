<app-page-title [titulo]="'Gerenciar despesas'"></app-page-title>
<app-page-filter-add [displayNew]="false" (openDialogSearchEmiter)="openDialog()"></app-page-filter-add>
<div class="card shadow bg-white rounded">
  <div class="card-body">
    <p-table [value]="expenses" responsiveLayout="stack" styleClass="p-datatable-sm">
      <ng-template pTemplate="header">
        <tr>
            <th>Descrição das despesas</th>
            <th></th>
        </tr>
      </ng-template>
       <ng-template pTemplate="body" let-expense>
          <tr>
            <td class="col-3">
              <h5 class="card-title">{{expense.description}}</h5>
              <div>
                <small class="text-muted">
                  <b>Responsável: </b>
                {{expense.user.fullName}}
                </small>
              </div>
              <div>
                <small class="text-muted">
                  <b>Categoria: </b>
                  {{expense.category.description}}
                </small>
              </div>
            </td>
            <td class="col-9">
              <div class="card shadow-sm p-3 bg-white rounded">
                <div class="card-body">
                <p-table [value]="expense.expenseDetailsViewModels" styleClass="p-datatable-sm">
                  <ng-template pTemplate="header">
                      <tr>
                          <th>Data de vencimento</th>
                          <th>Valor</th>
                          <th>Status</th>
                          <th></th>
                      </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-detail>
                      <tr>
                        <td class="col-6">
                          {{ detail.dueDay  | DateFormatPipe }}
                        </td>
                        <td class="col-4">
                          {{ detail.expenseValue | currency : "R$ " }}
                        </td>
                        <td class="col-4">
                         <app-expense-status [status]="detail.status"></app-expense-status>
                        </td>
                        <td class="col-4">
                          <app-expense-management-buttons [status]="detail.status"></app-expense-management-buttons>
                        </td>
                      </tr>
                  </ng-template>
                </p-table>
              </div>
              </div>
            </td>
          </tr>
      </ng-template>
  </p-table>
  </div>
</div>
<!-- <ng-template #template>
  <app-management-filters></app-management-filters>
</ng-template> -->
